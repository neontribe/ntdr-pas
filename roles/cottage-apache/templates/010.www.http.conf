<VirtualHost 127.0.0.1:80>
     ServerAdmin webmaster@localhost

     #no document should ever be served from here
     DocumentRoot /var/www/html
</VirtualHost>

<VirtualHost *:80>
	ServerAdmin {{ domain_name.split('.')[0] }}@{{ domain_name }}
	DocumentRoot /var/www/html

	ServerName {{ domain_name }}
	ServerAlias www.{{ domain_name }}

	# Disable TRACE & TRACK
	RewriteEngine on
	RewriteCond %{REQUEST_METHOD} ^(TRACE|TRACK)
	RewriteRule .* - [F]

	# Rewrite HTTP to HTTPS
	RewriteCond %{HTTPS} off
	RewriteRule ^/(.*) https://%{HTTP_HOST}/$1 [R,L]

	# error, crit, alert, emerg.
	# It is also possible to configure the loglevel for particular
	# modules, e.g.
	#LogLevel info ssl:warn

	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
